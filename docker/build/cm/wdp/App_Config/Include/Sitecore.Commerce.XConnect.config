<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>

    <xconnect>
      <runtime>
        <schemas>
          <schema name="registercustomeventsmodel" type="Sitecore.XConnect.Client.Configuration.StaticModelConfiguration,Sitecore.XConnect.Client.Configuration">
            <param desc="modeltype">Sitecore.Commerce.CustomModels.RegisterConnectEventModels, Sitecore.Commerce.Connect.Collection.Model</param>
          </schema>
        </schemas>
      </runtime>
    </xconnect>

    <pipelines>
      <convertToXConnectEvent>
        <!-- PAGE EVENTS -->
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToCultureChosenPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToCurrencyChosenPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToCartLinesPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToUserAccountPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToFacetAppliedPageEvent, Sitecore.Commerce.Connect.Core"/>

        <!-- Replacing the original xConnect Search converter with the Connect Search converter so we have our properties as part of the model. -->
        <processor type="Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToSearchEvent, Sitecore.Analytics.XConnect">
          <patch:attribute name="type">Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToSearchPageEvent, Sitecore.Commerce.Connect.Core</patch:attribute>
        </processor>

        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToProductSortingPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToVisitedCategoryPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToVisitedProductDetailsPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToAddToCartStockStatusPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToBackInStockSubscriptionPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToBackInStockUnsubscriptionPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToProductsAreBackInStockPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToVisitedProductStockStatusPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToGiftCardPurchasePageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToLoyaltyCardPurchasePageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToOfflineOrdersSynchronizedPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToOrderStatusChangedPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToReorderRequestedPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToVisitorOrderCancelPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToVisitorViewedOrderDetailsPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToVisitorViewedOrderHistoryPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToWishListLinesPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToWishListCreatedPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToWishListDeletedPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToWishListEmailedPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToWishListPrintedPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToCartPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToCartUpdatedPageEvent, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToEvent, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.PageEvents.Converters.ConvertPageEventDataToOrderedProductStockStatusPageEvent, Sitecore.Commerce.Connect.Core"/>

        <!-- GOALS -->
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToGoal, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.Goals.Converters.ConvertPageEventDataToUserAccountCreatedGoal, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToGoal, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.Goals.Converters.ConvertPageEventDataToCustomerAccountCreatedGoal, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToGoal, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.Goals.Converters.ConvertPageEventDataToLoyaltyProgramJoinedGoal, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertPageEventDataToGoal, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.Goals.Converters.ConvertPageEventDataToVisitorOrderCreatedGoal, Sitecore.Commerce.Connect.Core"/>

        <!-- OUTCOMES -->
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertOutcomeDataToOutcome, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.Outcomes.Converters.ConvertOutcomeDataToSubmittedOrderOutcome, Sitecore.Commerce.Connect.Core"/>
        <processor patch:before="processor[@type='Sitecore.Analytics.XConnect.DataAccess.Pipelines.ConvertToXConnectEventPipeline.ConvertOutcomeDataToOutcome, Sitecore.Analytics.XConnect']" type="Sitecore.Commerce.CustomModels.Outcomes.Converters.ConvertOutcomeDataToAbandonedCartOutcome, Sitecore.Commerce.Connect.Core"/>
      </convertToXConnectEvent>
    </pipelines>

  </sitecore>
</configuration>