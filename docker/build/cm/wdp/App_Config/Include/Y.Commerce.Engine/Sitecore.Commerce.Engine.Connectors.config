<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/" xmlns:role="http://www.sitecore.net/xmlconfig/role/">
  <sitecore role:require="Standalone or ContentDelivery or ContentManagement">

    <!--[Obsolete] To be removed next release-->
    <commerceEngineConnector>
      <types>
        <type name="ICommerceSearchManager" type="Sitecore.Commerce.Engine.Connect.Search.CommerceSearchManager, Sitecore.Commerce.Engine.Connect" lifetime="Singleton" />
        <type name="IIndexResolver" type="Sitecore.Commerce.Engine.Connect.Search.IndexResolver, Sitecore.Commerce.Engine.Connect" lifetime="PerCall" />
        <type name="ISortProvider" type="Sitecore.Commerce.Engine.Connect.Search.ProductSorter, Sitecore.Commerce.Engine.Connect" lifetime="Singleton" />
      </types>
    </commerceEngineConnector>
    <!--/ -->

    <services>
      <register
        serviceType="Sitecore.Commerce.Engine.Connect.Interfaces.ICommerceSearchManager, Sitecore.Commerce.Engine.Connect"
        implementationType="Sitecore.Commerce.Engine.Connect.Search.CommerceSearchManager, Sitecore.Commerce.Engine.Connect"
        lifetime="Singleton" />
      <register
        serviceType="Sitecore.Commerce.Engine.Connect.Search.IIndexResolver, Sitecore.Commerce.Engine.Connect"
        implementationType="Sitecore.Commerce.Engine.Connect.Search.IndexResolver, Sitecore.Commerce.Engine.Connect"
        lifetime="Transient" />
      <register
        serviceType="Sitecore.Commerce.Engine.Connect.Search.ISortProvider, Sitecore.Commerce.Engine.Connect"
        implementationType="Sitecore.Commerce.Engine.Connect.Search.ProductSorter, Sitecore.Commerce.Engine.Connect"
        lifetime="Singleton" />
    </services>
  </sitecore>
</configuration>
